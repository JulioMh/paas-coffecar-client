(this["webpackJsonppaas-coffecar-client"]=this["webpackJsonppaas-coffecar-client"]||[]).push([[0],{150:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAABD9JREFUWIXtV11MHFUU/s7s7C6wMPvjUiWw/LSQGkQSLWJaGyQGaQz+PZiAmqiJGh+wxkRITPqwkEhCArxJfLAxTWOjTeyLkRgM2haTthErbUroDxCWYlspsFsWFtbu7Bwftjud2ZldQOiTfk9z7z13vu+e+3POAf7roM0Yu/3dxSCxiQh7mVFBRB4AYOYgESaYcRYsD4Q6P72+rQJc/p46IjpERA0ECJlsGVCYeYiZu+50tg9vSYDk7/OIxP0AmoloU95iZgZwXGZqDXd+Ety0AI+/pxICDRCodDPEJkICYG4KdraPb1hAglw4TYB3K+SqCGABivKsmQiDAMnf5xEFPp+6csluQ5FT2hDhn0thhP++qxfBHJCZ9qRuh5g6WSTuTyUvdTsx9N6bcGVnbUjAnbUoGg4fQyC0pPYRUakI7gfwutZW5wGXv6dOIDqlPXB1ZT40VuxCXZkPLx45jrtxRUeWZ7eh6pF8WIgwu7SMW+Fl/PBOM4anZ3Fi7DJGb85pvcAKc732dug8cO+qqeQ7HDkocTlxbWER5V63wa0AEJVlnJyaAQD4nBKisoybyyu4trCIp32FuDofxGoslvw/EXAIgCpAvdNuf3cxETVof/7GE1X46JlaA2k6zC6FVQ85bFZ8dqAe+0uLdDZE1OD2dxcbBIDEpvUeme0AAQJIbEq21S0gwt5U46N/XEKWKGKnxw3Jbt8wiWS34+HcXPQNn8Ov07NGEQmuL3QCEm+73jC4uobe4XN4e081PtxXg4sfv4+YHM9IbhUtKJTycGLsCo78fhFxZqMRU3nyU+OBRGBJhawoiMUTpIVSXkZyLWLxuDl5Ag8lPx74nq8HVQAzpw0YDwCLBgFEmFhvlqwo65lsyAbEkwYBzDibac7ArTm8fGYE11fX0tpMrETw0pkR/Hx7ISO/luv+GWB5gAFT+XMrERTnZKPG7YJkNYQPFW6rFTVuJwqzszC3EjEnBxSwPJBs6y6eu6N3UCBqTJ1ktQg4f/Bd5Dty8N2lKxnWBrywexcYQO3nXyG0FjWMK8w/hTraDiTbuuUwcxcDz6dmP83Vlfh6dAyNFTtx8PtBtd/nlGAXLZhcDKl9x1pexUxoCa89/ii+/O2CfvUJdGn7DPmAp6P3GyJqSbZ3ez3wuZwYmpw2rKamsAAOmxWnp405aOUOL7yOHAxrxpj522BHmy4cG94BmamVmQMAIBDhufIyU3IgcTZuhJdNx8ZvL6DYJSHXZkuSB2Sm1lS7jClZS3Wl95epAOYjq6Yk68FqEfDWk9U4PHIhbUpm+hIGO9vHrUT14Wh0JhN5viMHBXm5acdjcQWjN/4KPFVQUJ8uKbWkmxw5OTgfqKo9KoBLADxmlpbvKylChdeDyyb3PpmWz4Yjr4y3fZC2UNlSYbK/1Ic8uw0/Xp26T7ydhUkqtKXZvZCajGqLIJ78N6XZ//gH3fC0aJV7vaYAAAAASUVORK5CYII="},151:function(e,t){e.exports="data:image/png;base64,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"},160:function(e,t,a){e.exports=a(303)},165:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),l=a.n(i),s=(a(165),a(166),a(12)),o=a(13),c=a(15),u=a(14),d=a(16),m=a(100),p=a(36),h=a(59),g=a(27),f=a(145),v=a(10),b=a(6),y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).saveId=function(t){e.props.redirectToTrip(t.id)},e.state={trips:[]},e.carTemplate=e.carTemplate.bind(Object(g.a)(e)),e.responsiveSettings=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}],e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"carTemplate",value:function(e){var t=this;return r.a.createElement("div",{className:"car-details"},r.a.createElement("div",{className:"p-grid p-nogutter"},r.a.createElement("div",{className:"p-col-12"},r.a.createElement("img",{src:e.imgLink,alt:e.imgLink,style:{width:"200px",maxHeight:"200px"}})),r.a.createElement("div",{className:"p-col-12 car-data"},r.a.createElement("div",{className:"car-title"},r.a.createElement("h2",null,e.title)),r.a.createElement("div",{className:"car-subtitle"},r.a.createElement("b",null,e.departureTime," | ",e.arrivalDate)),r.a.createElement(b.a,{style:{width:"75%",margin:"auto",marginTop:"50px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,"Descripcion"),e.description)),r.a.createElement("div",{className:"car-buttons"},r.a.createElement("br",null),r.a.createElement(v.a,{variant:"dark",onClick:function(){return t.saveId(e)}},"Ver mas detalles")))))}},{key:"render",value:function(){var e=r.a.createElement("h2",null,this.props.name);return r.a.createElement("div",{className:"carousel-demo"},r.a.createElement("div",{className:"content-section implementation"},r.a.createElement(f.Carousel,{value:this.state.trips,itemTemplate:this.carTemplate,style:{width:"75%",height:"100%",margin:"auto",marginTop:"50px",textAlign:"center",alignContent:"center"},orientation:"horizontal",numVisible:1,numScroll:1,responsive:this.responsiveSettings,header:e})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{trips:e.trips}}}]),t}(n.Component),A=a(147),E=a.n(A),x=(a(185),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={tripsAvailable:[],myTrips:[]},e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=sessionStorage.user;console.log(t),fetch("http://coffeecar.herokuapp.com/api/announces/search/findByDriverId?id="+JSON.parse(sessionStorage.user).id).then((function(e){return e.json()})).then((function(t){e.setState({myTrips:t})})),fetch("http://coffeecar.herokuapp.com/api/announces/search/findByDriverIdNot?id="+JSON.parse(sessionStorage.user).id).then((function(e){return e.json()})).then((function(t){e.setState({tripsAvailable:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"content-section implementation","aling-items":"center","justify-content":"center"},r.a.createElement(h.TabView,{renderActiveOnly:!0,style:{align:"center",margin:"auto"}},r.a.createElement(h.TabPanel,{header:"Viajes disponibles",leftIcon:"pi pi-home"},r.a.createElement(y,{trips:this.state.tripsAvailable,redirectToTrip:function(t){return e.props.history.push("/trip/".concat(t))}})),r.a.createElement(h.TabPanel,{header:"Mis viajes",leftIcon:"pi pi-user"},r.a.createElement(y,{trips:this.state.myTrips,redirectToTrip:function(t){return e.props.history.push("/trip/".concat(t))}})),r.a.createElement(h.TabPanel,{header:"Tiempo actual",leftIcon:"pi pi-cloud"},r.a.createElement(b.a,{style:{width:"75%",margin:"auto",marginTop:"50px",marginBottom:"50px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(E.a,{forecast:"today",apikey:"14e9287d01828d9cc8128840206f9dc0",type:"city",city:"Malaga, ES"})))))))}}]),t}(n.Component)),w=a(24),T=a.n(w),L=a(17),S=a(72),k=a(51),O=a(38),D=a(31),C=a(20),j=a(148),B=a(52),I=a(75),M=a(153),U=a(11),R=a(158),N=a(50),W=a(149),F=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],Z=function(e){if(void 0!==e.overlay.title){var t=e.overlay.getTitle(),a=new google.maps.InfoWindow;a.setContent("<div>"+t+"</div>"),a.open(e.map,e.overlay),e.map.setCenter(e.overlay.getPosition())}},V=function(e){var t={center:{lat:""===e.lat?36.72016:e.lat,lng:""===e.lng?-4.42034:e.lng},zoom:11,disableDefaultUI:!0,styles:F};return r.a.createElement(W.GMap,{onMapClick:e.onMapClick,onOverlayDragEnd:e.onOverlayDragEnd,onOverlayClick:Z,overlays:e.overlays,options:t,style:{width:"100%",minHeight:"320px"}})},G=a(30),P=a.n(G),J=a(150),Y=a.n(J),Q=a(151),z=a.n(Q),H=function(e){return e.map((function(e){return e.map((function(e){return K(e)}))}))},K=function(e){return new google.maps.Marker({position:{lat:parseFloat(e.lat),lng:parseFloat(e.lon)},icon:Y.a,title:"Linea: "+e.codLinea})},X=function(e){return e.map((function(e){return q(e)}))},q=function(e){return new google.maps.Marker({position:{lat:parseFloat(e.lat),lng:parseFloat(e.lng)},icon:z.a,title:"Lineas: "+e.line.join(",\n")})};function _(e){var t,a,n;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=[],n=0;case 2:if(!(n<e.length-1)){r.next=10;break}return r.next=5,T.a.awrap(P.a.get("https://coffeecar.herokuapp.com/api/buses/search/findByLine",{params:{line:e[n]}}));case 5:a=r.sent,t=[].concat(Object(L.a)(t),[a.data]);case 7:n++,r.next=2;break;case 10:return r.abrupt("return",t);case 11:case"end":return r.stop()}}))}function $(e,t){var a,n;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(P.a.get("https://coffeecar.herokuapp.com/api/stops/search/findNearby",{params:{lat:e.lat(),lon:e.lng()}}));case 2:return a=r.sent,n=a.data,r.next=6,T.a.awrap(P.a.get("https://coffeecar.herokuapp.com/api/stops/search/findNearby",{params:{lat:t.lat(),lon:t.lng()}}));case 6:return a=r.sent,n=[].concat(Object(L.a)(n),Object(L.a)(a.data)),r.abrupt("return",ee(n));case 9:case"end":return r.stop()}}))}var ee=function(e){var t=[],a=[];return e.map((function(e){return function(e,t,a){for(var n=!1,r=0;!n&&r<e.length-1;)n=e[r].codParada===a.codParada,r++;if(n)e[r-1].line.push(a.codLinea);else{var i={codParada:a.codParada,line:[a.codLinea],lat:a.lat,lng:a.lon};e.push(i)}t.includes(a.codLinea)||t.push(a.codLinea)}(t,a,e)})),{stops:t,lines:a}};var te=function(e,t){var a,n,r,i,l,s,o;return T.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,T.a.awrap($(e,t));case 2:return a=c.sent,n=a.stops,c.next=6,T.a.awrap(_(a.lines));case 6:return r=c.sent,i=H(r),l=X(n),s=[],i.map((function(e){return e.map((function(e){return s.push(e)}))})),o=[].concat(s,Object(L.a)(l)),c.abrupt("return",o);case 13:case"end":return c.stop()}}))},ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={commentBody:""},a.handleChange=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit(a.state.commentBody,a.props.comment),a.props.replied(),a.setState({commentBody:""})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(C.a,{as:U.a},r.a.createElement(D.a,{as:"textarea",name:"commentBody",id:"commentBody",placeholder:"Y aqui el comentario",value:this.state.commentBody,onChange:this.handleChange})),r.a.createElement(U.a,null,r.a.createElement(v.a,{style:{marginTop:"10px"},type:"submit",variant:"dark"},"Comentar")))}}]),t}(n.Component),ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showReply:!1},a.replied=function(){a.setState({showReply:!1})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,a=this.state.showReply?r.a.createElement(ae,{comment:this.props.comment,handleSubmit:this.props.handleSubmit,replied:this.replied}):null;return r.a.createElement(b.a,{style:{width:"100%",margin:"auto",marginTop:"20px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,this.props.comment.author.name),r.a.createElement(b.a.Subtitle,{className:"mb-2 text-muted"},this.props.comment.date),r.a.createElement(b.a.Text,null,this.props.comment.body),r.a.createElement(v.a,{onClick:function(){return e.setState((function(e){return{showReply:!e.showReply}}))},variant:"warning",style:{marginBottom:"20px"}},"Responder"),a,this.props.comment.responses.map((function(a){return r.a.createElement(t,{key:a.id,comment:a,handleSubmit:e.props.handleSubmit})}))))}}]),t}(r.a.Component),re=P.a.create({baseURL:"https://coffeecar.herokuapp.com/api"}),ie=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[]},a.editComment=function(e,t){var n=t.responses?t.responses:[];re.post("comments",e).then((function(e){n.push(e.data),t.responses=Object(L.a)(n),re.post("comments",t).then(a.setState({comments:Object(L.a)(a.state.comments)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},a.handleSubmit=function(e,t){var n={body:e,author:JSON.parse(sessionStorage.user),date:new Date,responses:[]};t?(n.announce=null,a.editComment(n,t)):(n.announce=a.props.announce,re.post("comments",n).then((function(e){a.setState({comments:[].concat(Object(L.a)(a.state.comments),[e.data])})})))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("didmount"),0===this.state.comments.length&&re.get("comments/"+this.props.announce.id).then((function(t){return e.setState({comments:t.data.reverse().filter((function(e){return null!==e.announce}))})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.comments.length!==this.state.comments.length&&re.get("comments/"+this.props.announce.id).then((function(e){return a.setState({comments:e.data.reverse().filter((function(e){return null!==e.announce}))})}))}},{key:"render",value:function(){var e=this,t=this.state.comments;return r.a.createElement(b.a,{style:{width:"75%",margin:"auto",marginTop:"20px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,"\xa1Comenta algo!"),r.a.createElement(ae,{handleSubmit:this.handleSubmit,replied:function(){}}),t.map((function(t){return r.a.createElement(ne,{key:t.id,comment:t,handleSubmit:e.handleSubmit})}))))}}]),t}(r.a.Component),le=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={writable:!0,overlays:null,mapTitle:"",mapSubtitle:"",postingData:!1,buttonLabel:"Confirmar",postingImg:!1,showImg:!1,deleting:!1,posted:!1,id:0,title:"",departureTime:"",arrivalDate:"",arrivalLatitude:"",arrivalLongitude:"",departureLatitude:"",departureLongitude:"",availableSeats:"",description:"",imgLink:"",seats:"2",driver:null,passengers:null,joined:null},a.onChange=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a.uploadHandler=function(e){a.setState((function(e){return{postingImg:!e.postingImg}}));var t=new FormData;t.append("image",e.files[0]),P()("https://api.imgur.com/3/upload.json",{method:"POST",headers:{authorization:"Client-ID ".concat("546c25a59c58ad7")},data:t}).then((function(e){return a.setState((function(t){return{postingImg:!t.postingImg,imgLink:e.data.data.link}}))})).catch((function(e){return console.log(e)}))},a.handleModal=function(){a.setState((function(e){return{showImg:!e.showImg}}))},a.onMapClick=function(e){a.state.writable&&(a.state.departureLatitude&&!a.state.arrivalLatitude?a.setState({arrivalLatitude:e.latLng.lat(),arrivalLongitude:e.latLng.lng()}):a.state.arrivalLatitude||a.setState({departureLatitude:e.latLng.lat(),departureLongitude:e.latLng.lng()}),a.addMarkers())},a.onOverlayDragEnd=function(e){"A"===e.overlay.label?a.setState({departureLatitude:e.originalEvent.latLng.lat(),departureLongitude:e.originalEvent.latLng.lng()}):a.setState({arrivalLatitude:e.originalEvent.latLng.lat(),arrivalLongitude:e.originalEvent.latLng.lng()})},a.handleJoin=function(){var e=[].concat(Object(L.a)(a.state.passengers),[JSON.parse(sessionStorage.user)]);a.setState((function(t){return{passengers:e,availableSeats:t.availableSeats-1,postingData:!t.postingData}}))},a.handleUnjoin=function(){var e=a.state.passengers.filter((function(e){return JSON.parse(sessionStorage.user).id!==e.id}));a.setState((function(t){return{passengers:e,availableSeats:t.availableSeats+1,postingData:!t.postingData}}))},a.handleSubmit=function(e){e.preventDefault(),a.setState((function(e){return{postingData:!e.postingData}}))},a.postData=function(){if(""===a.state.arrivalLatitude||""===a.state.departureLatitude)alert("Selecciona el lugar de origen y destino"),a.setState((function(e){return{postingData:!e.postingData}}));else{var e={title:a.state.title,seats:a.state.seats,departureTime:a.state.departureTime,arrivalDate:a.state.arrivalDate,arrivalLatitude:a.state.arrivalLatitude,arrivalLongitude:a.state.arrivalLongitude,departureLatitude:a.state.departureLatitude,departureLongitude:a.state.departureLongitude,description:a.state.description,imgLink:a.state.imgLink,driver:a.state.driver,passengers:a.state.passengers};0!==a.state.id&&(e.id=a.state.id),fetch("https://coffeecar.herokuapp.com/api/announces",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){a.setState((function(t){return{id:e.id,posted:!0,postingData:!t.postingData,buttonLabel:"\xa1Listo! \xbfQuieres cambiar algo?",joined:!t.joined}}))})).catch((function(e){return console.log(e)}))}},a.delete=function(){a.setState((function(e){return{deleting:!e.deleting}})),P.a.delete("https://coffeecar.herokuapp.com/api/announces/"+a.state.id).then((function(){alert("\xa1Listo!"),a.props.history.push("/home")}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){this.state.postingData&&this.postData()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;"create"!==t?P.a.get("https://coffeecar.herokuapp.com/api/announces/"+t).then((function(t){var a=t.passengers?t.passengers:[];e.setState({id:t.data.id,title:t.data.title,departureTime:t.data.departureTime,arrivalDate:t.data.arrivalDate,arrivalLatitude:t.data.arrivalLatitude,arrivalLongitude:t.data.arrivalLongitude,departureLatitude:t.data.departureLatitude,departureLongitude:t.data.departureLongitude,availableSeats:t.data.seats-a.length,description:t.data.description,imgLink:t.data.imgLink,seats:t.data.seats,driver:t.data.driver,passengers:a,writable:t.data.driver.id===JSON.parse(sessionStorage.user).id,posted:!0,joined:a.find((function(e){return e.id===JSON.parse(sessionStorage.user).id}))}),e.addMarkers()})):this.setState({driver:JSON.parse(sessionStorage.user)})}},{key:"addMarkers",value:function(){var e,t,a,n,r,i,l,s;return T.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=this.state.overlays,t=new google.maps.Marker({position:{lat:this.state.departureLatitude,lng:this.state.departureLongitude},label:"A",draggable:this.state.writable,animation:google.maps.Animation.DROP}),a="Desde...",n="Haz click para marcar tu punto de salida",""!==this.state.departureLatitude&&""===this.state.arrivalLatitude?(e=[t],a="Hasta...",n="Haz click aqui para marcar tu destino"):""!==this.state.arrivalLatitude&&(r=new google.maps.Marker({position:{lat:this.state.arrivalLatitude,lng:this.state.arrivalLongitude},label:"B",draggable:this.state.writable,animation:google.maps.Animation.DROP}),e=e?[].concat(Object(L.a)(e),[r]):[t,r],a="\xbfQuieres cambiar algo?",n="\xa1Mueve las marcas!"),this.state.writable){o.next=14;break}return i=new google.maps.LatLng(this.state.departureLatitude,this.state.departureLongitude),l=new google.maps.LatLng(this.state.arrivalLatitude,this.state.arrivalLongitude),o.next=10,T.a.awrap(te(i,l));case 10:s=o.sent,e=[].concat(Object(L.a)(e),Object(L.a)(s)),a="Transporte p\xfablio...",n="Otra alternativa por si te dejan tirado...";case 14:this.setState({overlays:e,mapTitle:a,mapSubtitle:n});case 15:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state.writable&&0!==this.state.id?this.state.deleting?r.a.createElement(v.a,{variant:"danger",disabled:!0},r.a.createElement(B.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(v.a,{onClick:this.delete,variant:"danger"},"Eliminar anuncio"):null,t=this.state.writable?this.state.postingData?r.a.createElement(v.a,{variant:"dark",disabled:!0},r.a.createElement(B.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(v.a,{variant:"dark",style:{marginLeft:"auto"},type:"submit"},this.state.buttonLabel):null,a=this.state.joined?this.state.postingData?r.a.createElement(v.a,{variant:"danger",disabled:!0},r.a.createElement(B.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(v.a,{variant:"danger",onClick:this.handleUnjoin},"\xbfDejar el viaje?"):this.state.postingData?r.a.createElement(v.a,{variant:"success",disabled:!0},r.a.createElement(B.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(v.a,{variant:"success",onClick:this.handleJoin},"\xa1Unete al viaje!"),n=this.state.postingImg?r.a.createElement(v.a,{variant:"dark",disabled:!0},r.a.createElement(B.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):r.a.createElement(j.FileUpload,{mode:"basic",chooseLabel:""===this.state.imgLink?"\xbfAlguna imagen del coche?":"\xa1Listo! \xbfNo te convence?",name:"imgLink",customUpload:!0,auto:!0,uploadHandler:this.uploadHandler}),i=this.state.imgLink?this.state.postingImg?null:r.a.createElement(v.a,{variant:"dark",onClick:this.handleModal},"Ver coche"):null,l={title:this.state.title,seats:this.state.seats,departureTime:this.state.departureTime,arrivalDate:this.state.arrivalDate,arrivalLatitude:this.state.arrivalLatitude,arrivalLongitude:this.state.arrivalLongitude,departureLatitude:this.state.departureLatitude,departureLongitude:this.state.departureLongitude,description:this.state.description,imgLink:this.state.imgLink,driver:this.state.driver,passengers:this.state.passengers,id:this.state.id};return r.a.createElement(I.a,null,r.a.createElement(R.a,{show:this.state.showImg,size:"md",centered:!0,onHide:this.handleModal},r.a.createElement(M.a,{src:this.state.imgLink.concat("/171x180")})),r.a.createElement(b.a,{style:{width:"75%",margin:"auto",marginTop:"50px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,this.response?"Informaci\xf3n del viaje":"\xa1Publica tu viaje ahora!"),r.a.createElement(b.a.Subtitle,{className:"mb-2 text-muted"},"Que no se te olviden las llaves :P"),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(N.a,null,r.a.createElement(U.a,null,r.a.createElement(C.a,null,r.a.createElement(O.a,null,"Titulo"),r.a.createElement(D.a,{type:"text",name:"title",id:"title",plaintext:!this.state.writable,readOnly:!this.state.writable,onChange:this.onChange,value:null===this.state.title?"":this.state.title})),r.a.createElement(C.a,null,this.state.writable?n:null),r.a.createElement(C.a,null,i),r.a.createElement(O.a,null,this.state.availableSeats," asientos disponibles de ",this.state.seats," "),r.a.createElement(k.a.Row,null,this.state.writable?r.a.createElement(C.a,{as:U.a},r.a.createElement(D.a,{type:"range",min:"1",max:"14",name:"seats",id:"seats",plaintext:!this.state.writable,readOnly:!this.state.writable,onChange:this.onChange,value:null===this.state.seats?"":this.state.seats})):null,r.a.createElement(C.a,{as:U.a},this.state.writable?null:a)),r.a.createElement(k.a.Row,null,r.a.createElement(C.a,{as:U.a},r.a.createElement(O.a,null,"Fecha de salida"),r.a.createElement(D.a,{type:"datetime-local",name:"departureTime",id:"departureTime",plaintext:!this.state.writable,readOnly:!this.state.writable,onChange:this.onChange,value:null===this.state.departureTime?"":this.state.departureTime})),r.a.createElement(C.a,{as:U.a},r.a.createElement(O.a,null,"Fecha de llegada"),r.a.createElement(D.a,{type:"datetime-local",name:"arrivalDate",id:"arrivalDate",plaintext:!this.state.writable,readOnly:!this.state.writable,onChange:this.onChange,value:null===this.state.arrivalDate?"":this.state.arrivalDate}))),r.a.createElement(N.a,null),r.a.createElement(C.a,null,r.a.createElement(O.a,null,"Descripci\xf3n"),r.a.createElement(D.a,{as:"textarea",name:"description",id:"description",row:"3",plaintext:!this.state.writable,readOnly:!this.state.writable,onChange:this.onChange,value:null===this.state.description?"":this.state.description}))),r.a.createElement(U.a,null,r.a.createElement(b.a,{style:{height:"97%",width:"100%",margin:"auto"}},r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,this.state.mapTitle),r.a.createElement(b.a.Subtitle,{className:"mb-2 text-muted"},this.state.mapSubtitle),r.a.createElement(V,{lat:this.state.departureLatitude,lng:this.state.departureLongitude,onOverlayDragEnd:this.onOverlayDragEnd,onMapClick:this.onMapClick,overlays:this.state.overlays,writable:this.state.writable,style:{width:"100%",minHeight:"365px"}}))))),r.a.createElement(N.a,{className:"justify-content-md-center"},r.a.createElement(U.a,{md:"auto"},t),r.a.createElement(U.a,{md:"auto"},e))))),0===this.state.id?null:r.a.createElement(ie,{announce:l}))}}]),t}(r.a.Component),se=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Error: Page does not exist!"))},oe=a(79),ce=a.n(oe),ue=a(83),de=a.n(ue),me=a(80),pe=a.n(me),he=function(e){var t=function(t){!function(t){var a;t.w3.U3&&(a={name:t.w3.ig,email:t.w3.U3}),a&&re.get("users/search/findByEmail?email="+a.email).then((function(e){if(""===e.data){var t={name:a.name,email:a.email};re.post("users",t).then((function(e){return e.data}))}return e.data})).then((function(t){sessionStorage.setItem("user",JSON.stringify(t)),e.logged()}))}(t)};return r.a.createElement("div",{className:de.a.contenedor},r.a.createElement(b.a,{style:{width:"100%",margin:"auto",marginTop:"70px",boxShadow:"5px 5px 5px grey"}},r.a.createElement("div",{className:de.a.center},r.a.createElement("h1",null,"\xa1Bienvenido a CoffeeCar!"),r.a.createElement(M.a,{src:pe.a,className:de.a.imgLogo}),r.a.createElement(ce.a,{clientId:"614940743476-2hc47higdlfhia4v8d6o4tstjpuc5kd0.apps.googleusercontent.com",buttonText:"Login con Google",theme:"dark",onSuccess:t,onFailure:t}))))},ge=a(306),fe=a(305),ve=function(e){var t=null;return t=e.logged?r.a.createElement(ge.a,{bg:"dark",variant:"dark"},r.a.createElement(ge.a.Brand,{href:"/home"},r.a.createElement(M.a,{src:pe.a,rounded:!0,style:{width:"65px"}})),r.a.createElement(ge.a.Brand,{href:"/"},"CoffeeCar"),r.a.createElement(ge.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(ge.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(fe.a,{className:"mr-auto"},r.a.createElement(fe.a.Link,{href:"/"},"Inicio"),r.a.createElement(fe.a.Link,{href:"/trip/create"},"Nuevo anuncio"),r.a.createElement(fe.a.Link,{href:"/twitter"},"Twitter"))),r.a.createElement(oe.GoogleLogout,{clientId:"614940743476-2hc47higdlfhia4v8d6o4tstjpuc5kd0.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){sessionStorage.removeItem("user"),e.logOut()}})):r.a.createElement(p.a,{to:"/"}),r.a.createElement("div",null,t)},be=(a(216),a(217),a(218),a(41)),ye=(a(302),function(){return r.a.createElement(I.a,null,r.a.createElement(N.a,null,r.a.createElement(U.a,null,r.a.createElement(b.a,{style:{width:"300px",margin:"auto",marginTop:"50px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(be.Follow,{username:"coffeecarapp",options:{size:"large"}}),r.a.createElement(be.Hashtag,{hashtag:"CoffeeCar",options:{size:"large"}}),r.a.createElement(be.Mention,{username:"coffeecarapp",options:{size:"large"}}))),r.a.createElement(b.a,{style:{width:"100%",margin:"auto",marginTop:"50px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(be.Timeline,{dataSource:{sourceType:"likes",screenName:"coffeecarapp"},options:{username:"CoffeeCar",height:"400"},onLoad:function(){return console.log("Timeline is loaded!")}})))),r.a.createElement(U.a,null,r.a.createElement(b.a,{style:{width:"100%",margin:"auto",marginTop:"50px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(be.Timeline,{dataSource:{sourceType:"profile",screenName:"coffeecarapp"},options:{username:"CoffeeCar",height:"400"},onLoad:function(){return console.log("Timeline is loaded!")}}))),r.a.createElement(b.a,{style:{width:"100%",margin:"auto",marginTop:"50px",boxShadow:"5px 5px 5px grey"}},r.a.createElement(b.a.Body,null,r.a.createElement(be.Tweet,{tweetId:"1219318027595997194"}))))),r.a.createElement("br",null),r.a.createElement("br",null))}),Ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={logged:!!sessionStorage.user},a.logged=function(){a.setState((function(e){return{logged:!e.logged}}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.logged?le:null,t=this.state.logged?x:null,a=this.state.logged?ye:null;return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(ve,{logged:this.state.logged,logOut:this.logged})),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/home",component:t,exact:!0}),r.a.createElement(p.b,{path:"/trip/:id",component:e,exact:!0}),r.a.createElement(p.b,{path:"/twitter",component:a,exact:!0}),r.a.createElement(p.b,{exact:!0,path:"/"},this.state.logged?r.a.createElement(p.a,{to:"/home"}):r.a.createElement(he,{logged:this.logged})),r.a.createElement(p.b,{component:se}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,t,a){e.exports=a.p+"static/media/CoffeeCarLogo.dd292a09.png"},83:function(e,t,a){e.exports={imgLogo:"Welcome_imgLogo__1ipQX",center:"Welcome_center__1kj5Q",contenedor:"Welcome_contenedor__3-cVN"}}},[[160,1,2]]]);
//# sourceMappingURL=main.83858de3.chunk.js.map